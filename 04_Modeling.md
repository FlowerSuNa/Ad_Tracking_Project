##### TalkingData AdTracking Fraud Detection Challenge
# 4. Modeling
[source code](04_Modeling.py) <br>

Find the important features and then, make the model using Logistic Regression, Decision Tree, Random Forest, Gradient boosting and LightGBM.

<br>

Hypothesis : Decide whether to download or not based on
1. the user's ip.
2. which app and channel is used.

<br>

---

## Split Train Data

#### Train Size : 10,000,000

| Dataset | Not Downloaded | Downloaded | Total |
|:-------:|---------------:|-----------:|------:|
| Train | 7,982,502 | 17,498 | 8,000,000 |
| Valid | 1,995,618 | 4,382 | 2,000,000 |

<br>

#### Train Size : 20,000,000

| Dataset | Not Downloaded | Downloaded | Total |
|:-------:|---------------:|-----------:|------:|
| Train | 15,962,214 | 37,786 | 16,000,000 |
| Valid | 3,990,607 | 9,393 | 4,000,000 |

> Use this data set a lot, because it is similar to the number of test data set.

<br>

#### Train Size : 30,000,000

| Dataset | Not Downloaded | Downloaded | Total |
|:-------:|---------------:|-----------:|------:|
| Train | 23,939,416 | 60,584 | 24,000,000 |
| Valid | 5,984,690 | 15,310 | 6,000,000 |

<br>

#### Train Size : 40,000,000

| Dataset | Not Downloaded | Downloaded | Total |
|:-------:|---------------:|-----------:|------:|
| Train | 31,919,562 | 80,438 | 32,000,000 |
| Valid | 7,979,930 | 20,070 | 8,000,000 |

<br>

#### Train Size : 50,000,000

| Dataset | Not Downloaded | Downloaded | Total |
|:-------:|---------------:|-----------:|------:|
| Train | 39,897,655 | 102,345 | 40,000,000 |
| Valid | 9,974,300 | 25,700 | 10,000,000 |

<br>

#### Train Size : All

| Dataset | Not Downloaded | Downloaded | Total |
|:-------:|---------------:|-----------:|------:|
| Train | 147,557,584 | 365,528 | 147,923,112 |
| Valid | 36,889,460 | 91,318 | 36,980,778 |

<br>

---

## Used features : rate_ip, rate_app, rate_os, rate_device, rate_channel, rate_hour

Check the performance of the rate features.

<br>

#### Logistic Regression

* Train Size : 20,000,000

* Score

| C | Train AUC | Valid AUC | Score |
|:-:|:---------:|:---------:|:-----:|
| 0.01 | 0.96261 | 0.96278 | 0.9367697 |
| 0.1 | 0.96191 | 0.96208 | - |
| 1 | 0.96156 | 0.96178 | - |
| 10 | 0.96151 | 0.96174 | - |
| 100 | 0.96150 | 0.96173 | - |

<br>

* Coefficient

| C | rate_ip | rate_app | rate_os | rate_device | rate_channel | rate_hour |
|:-:|:-------:|:--------:|:-------:|:-----------:|:------------:|:---------:|
| 0.01 | 8.83573 | 8.30467 | 6.26596 | 5.96615 | 8.95498 | -0.00403 |
| 0.1 | 9.98409 | 8.98668 | 10.85662 | 7.91580 | 10.10841 | 0.05951 |
| 1 | 10.15168 | 9.04859 | 13.02725 | 7.12579 | 10.15123 | 0.17767 |
| 10 | 10.16968 | 9.05410 | 13.38279 | 6.93660 | 10.15283 | 0.20691 |
| 100 | 10.17151 | 9.05464 | 13.42077 | 6.91559 | 10.15299 | 0.21035 |

<br>

#### Decision Tree

* Train Size : 20,000,000

* Score

| max_depth | Train AUC | Valid AUC | Score |
|:---------:|:---------:|:---------:|:-----:|
| 3 | 0.88169 | 0.88168 | - |
| 4 | 0.90263 | 0.90310 | - |
| 5 | 0.90376 | 0.90446 | - |
| 6 | 0.93409 | 0.93380 | - |
| 7 | **0.93491** | **0.93425** | **0.8832672** |

> Overfitting

<br>

* Feature Importance

| max_depth | rate_ip | rate_app | rate_os | rate_device | rate_channel | rate_hour |
|:---------:|:-------:|:--------:|:-------:|:-----------:|:------------:|:---------:|
| 3 | **0.76824** | 0.23098 | 0 | 0 | 0.00078 | 0 |
| 4 | **0.64219** | 0.28548 | 0 | 0.03179 | 0.04054 | 0 |
| 5 | **0.62294** | 0.27737 | 0.02594 | 0.02986 | 0.04208 | 0.00180 |
| 6 | **0.62014** | 0.27690 | 0.02580 | 0.02943 | 0.04564 | 0.00208 |
| 7 | **0.62073** | 0.26729 | 0.02743 | 0.02946 | 0.05227 | 0.00282 |

<br>

## Used features : rate_app, rate_os, rate_device, rate_channel, rate_hour

Overfitting occurred, remove feature 'rate_ip' and make models.

<br>

#### Logistic Regression

* Train Size : 20,000,000

* Score

| C | Train AUC | Valid AUC | Score |
|:-:|:---------:|:---------:|:-----:|
| 0.01 | 0.95613 | 0.95553 | **0.9472774** |
| 0.1 | 0.95529 | 0.95471 | - |
| 1 | 0.95504 | 0.95448 | - |
| 10 | 0.95467 | 0.95404 | - |
| 100 | 0.95466 | 0.95403 | - |

<br>

* Coefficient

| C | rate_app | rate_os | rate_device | rate_channel | rate_hour |
|:-:|:--------:|:-------:|:-----------:|:------------:|:---------:|
| 0.01 | 9.07053 | 7.80990 | 7.42953 | 0.10734 | -0.00269 |
| 0.1 | 9.72578 | 12.53654 | 8.94837 | 12.08472 | 0.04231 |
| 1 | 9.76096 | 14.40439 | 8.25626 | 12.17003 | 0.99752 |
| 10 | 9.76358 | 14.68323 | 8.11816 | 12.17405 | 8.16964 |
| 100 | 9.76751 | 14.67653 | 8.12769 | 12.17345 | 8.24220 |

<br>

#### Decision Tree

* Train Size : 20,000,000

* Score

| max_depth | Train AUC | Valid AUC | Score |
|:---------:|:---------:|:---------:|:-----:|
| 3 | 0.92675 | 0.92646 | - |
| 4 | 0.92967 | 0.92910 | - |
| 5 | 0.95296 | 0.95193 | 0.9363925 |
| 6 | 0.96002 | 0.95906 | 0.9439176 |
| 7 | **0.96137** | **0.96012** | **0.9413582** |

<br>

* Feature Importance

| max_depth | rate_app | rate_os | rate_device | rate_channel | rate_hour |
|:---------:|:--------:|:-------:|:-----------:|:------------:|:---------:|
| 3 | 0.70852 | 0.00429 | 0 | 0.28719 | 0 |       
| 4 | 0.52808 | 0.20342 | 0.00282 | 0.26568 | 0 |
| 5 | 0.47189 | 0.18632 | 0.00249 | 0.33659 | 0.00270 |
| 6 | 0.46533 | 0.19361 | 0.00983 | 0.32733 | 0.00389 |
| 7 | 0.46043 | 0.19400 | 0.01416 | 0.32401 | 0.00740 |

<br>

## Used features : rate_app, rate_os, rate_channel

Make models with three features that are high feature importance.

<br>

#### Logistic Regression

* Train Size : 20,000,000

* Score

| C | Train AUC | Valid AUC | Score |
|:-:|:---------:|:---------:|:-----:|
| 0.01 | 0.95494 | 0.95444 | **0.9457139** |
| 0.1 | 0.95347 | 0.95302 | - |
| 1 | 0.95316 | 0.95272 | - |
| 10 | 0.95314 | 0.95270 | - |
| 100 | 0.95313 | 0.95269 | - |

<br>

* Coefficient

| C | rate_app | rate_os | rate_channel |
|:-:|:--------:|:-------:|:------------:|
| 0.01 | 9.40680 | 9.84060 | 11.46867 |
| 0.1 | 9.84446 | 19.20921 | 12.79420 |
| 1 | 9.80845 | 21.30565 | 12.63379 |
| 10 | 9.80282 | 21.52774 | 12.62223 |
| 100 | 9.80231 | 21.55137 | 12.62000 |

<br>

#### Decision Tree

* Train Size : 20,000,000

* Score

| max_depth | Train AUC | Valid AUC | Score |
|:---------:|:---------:|:---------:|:-----:|
| 3 | 0.92675 | 0.92646 | - |
| 4 | 0.92967 | 0.92910 | - |
| 5 | 0.95296 | 0.95193 | 0.9363924 |
| 6 | 0.96038 | 0.95949 | 0.9450054 |
| 7 | **0.96268** | **0.96164** | **0.9473591** |

<br>

* Feature Importance

| max_depth | rate_app | rate_os | rate_channel |
|:---------:|:--------:|:-------:|:------------:|
| 3 | 0.70852 | 0.00429 | 0.28719 |
| 4 | 0.52582 | 0.20420 | 0.26997 |
| 5 | 0.47736 | 0.18762 | 0.33502 |
| 6 | 0.46861 | 0.20187 | 0.32953 |
| 7 | 0.46297 | 0.20511 | 0.33191 |

<br>

#### Random Forest

* Train Size : 20,000,000

* Score

| max_depth | n_estimators | Train AUC | Valid AUC | Score |
|:---------:|:------------:|:---------:|:---------:|:-----:|
| 3 | 50 | 0.93918 | 0.93977 | - |
| | 70 | 0.93810 | 0.93852 | - |
| | 100 | 0.93887 | 0.93940 | - |
| 4 | 50 | 0.95010 | 0.94954 | - |
| | 70 | 0.94952 | 0.94916 | - |
| | 100 | 0.94646 | 0.94554 | - |
| 5 | 50 | 0.95640 | 0.95518 | - |
| | 70 | 0.95295 | 0.955237 | - |
| | 100 | 0.95359 | 0.95274 | - |
| 6 | 50 | 0.95993 | 0.95907 | 0.9496954 |
| | 70 | 0.96046 | 0.95954 | 0.9509133 |
| | 100 | 0.96071 | 0.95986 | 0.9506994 |
| 7 | 50 | 0.96214 | 0.96117 | 0.9527221 |
| | 70 | 0.96318 | 0.96224 | 0.9524520 |
| | 100 | 0.96170 | 0.96077 | 0.9520009 |

<br>

* Feature Importance

| max_depth | n_estimators | rate_app | rate_os | rate_channel |
|:---------:|:------------:|:--------:|:-------:|:------------:|
| 3 | 50 | 0.46121 | 0.21606 | 0.32273 |
| | 70 | 0.41601 | 0.22909 | 0.35490 |
| | 100 | 0.43509 | 0.19891 | 0.36600 |
| 4 | 50 | 0.43839 | 0.15295 | 0.40866 |
| | 70 | 0.40120 | 0.19832 | 0.40048 |
| | 100 | 0.40977 | 0.20700 | 0.38323 |
| 5 | 50 | 0.38725 | 0.22160 | 0.39115 |
| | 70 | 0.38245 | 0.19119 | 0.42636 |
| | 100 | 0.37707 | 0.19082 | 0.43211 |
| 6 | 50 | 0.36191 | 0.21108 | 0.42701 |
| | 70 | 0.39358 | 0.21123 | 0.39519 |
| | 100 | 0.40916 | 0.21873 | 0.37210 |
| 7 | 50 | 0.40925 | 0.22861 | 0.36214 |
| | 70 | 0.41910 | 0.22377 | 0.35713 |
| | 100 | 0.37782 | 0.24351 | 0.37867 |

<br>

#### Gradient Boosting

* Train Size : 20,000,000

* Score

| max_depth | n_estimators | learning_rate | Train AUC | Valid AUC | Score |
|:---------:|:------------:|:-------------:|:---------:|:---------:|:-----:|
| 5 | 50 | 0.001 |
| | | 0.01 |
| | | 0.1 |
| | 70 | 0.001 |
| | | 0.01 |
| | | 0.1 |
| 6 | 50 | 0.001 |
| | | 0.01 |
| | | 0.1 |
| | 70 | 0.001 |
| | | 0.01 |
| | | 0.1 |
| 7 | 50 | 0.001 |
| | | 0.01 |
| | | 0.1 |
| | 70 | 0.001 |
| | | 0.01 |
| | | 0.1 |

<br>

* Feature Importance

| max_depth | n_estimators | learning_rate | rate_app | rate_os | rate_channel |
|:---------:|:------------:|:-------------:|:--------:|:-------:|:------------:|
| 5 | 50 | 0.001 |
| | | 0.01 |
| | | 0.1 |
| | 70 | 0.001 |
| | | 0.01 |
| | | 0.1 |
| 6 | 50 | 0.001 |
| | | 0.01 |
| | | 0.1 |
| | 70 | 0.001 |
| | | 0.01 |
| | | 0.1 |
| 7 | 50 | 0.001 |
| | | 0.01 |
| | | 0.1 |
| | 70 | 0.001 |
| | | 0.01 |
| | | 0.1 |

<br>

#### LightGBM

* Parameter

<br>

* Score

| Train Size | Train AUC | Valid AUC | Score |
|:----------:|:---------:|:---------:|:-----:|
| 10m |
| 20m |
| 30m |
| 40m |
| 50m |
| All |

<br>

* Feature Importance

| Train Size | rate_app | rate_os | rate_channel |
|:----------:|:--------:|:-------:|:------------:|
| 10m |
| 20m |
| 30m |
| 40m |
| 50m |
| All |

<br>

---

## Used Features : gap_ip, gap_app, gap_device, gap_os, gap_channel

Check the performance of the gap features.

<br>

#### Logistic Regression

* Train Size : 20,000,000

* Score

| C | Train AUC | Valid AUC | Score |
|:-:|:---------:|:---------:|:-----:|
| 0.01 | 0.90844 | 0.90897 | - |
| 0.1 | 0.90844 | 0.90897 | - |
| 1 | 0.90844 | 0.90897 | - |
| 10 | 0.90845 | 0.90897 | 0.8962398 |
| 100 | 0.90844 | 0.90896 | - |

<br>

* Coefficient

| C | gap_ip | gap_app | gap_device | gap_os | gap_channel |
|:-:|:------:|:-------:|:----------:|:------:|:-----------:|
| 0.01 | -7.15063 e-06 | -2.37046 e-07 | -1.21780 e-08 | -1.83710 e-08 | -1.44350 e-06 |
| 0.1 | -7.15010 e-06 | -2.37046 e-07 | -1.21780 e-08 | -1.83711 e-08 | -1.44351 e-06 |
| 1 | -7.14879 e-06 | -2.37047 e-07 | -1.21781 e-08 | -1.83713 e-08 | -1.44352 e-06 |
| 10 | -7.14284 e-06 | -2.37052 e-07 | -1.21786 e-08 | -1.83720 e-08 | -1.44356 e-06 |
| 100 | -7.15077 e-06 | -2.37046 e-07 | -1.21779 e-08 | -1.83710 e-08 | -1.44350 e-06 |

<br>

#### Decision Tree

* Score

| max_depth | Train AUC | Valid AUC | Score |
|:---------:|:---------:|:---------:|:-----:|
| 3 | 0.92493 | 0.92502 | - |
| 4 | 0.93229 | 0.93298 | - |
| 5 | 0.94772 | 0.94747 | - |
| 6 | 0.94938 | 0.94880 | - |
| 7 | **0.95566** | **0.95484** | **0.9401801** |

<br>

* Feature Importance

| max_depth | gap_ip | gap_app | gap_device | gap_os | gap_channel |
|:---------:|:------:|:-------:|:----------:|:------:|:-----------:|
| 3 | 0.77481 | 0.22519 | 0 | 0 | 0 |
| 4 | 0.77849 | 0.19862 | 0.01774 | 0 | 0.00515 |
| 5 | 0.72200 | 0.23695 | 0.01639 | 0.01433 | 0.01033 |
| 6 | 0.67206 | 0.25869 | 0.01511 | 0.01325 | 0.04089 |
| 7 | 0.61360 | 0.27204 | 0.01431 | 0.03532 | 0.06472 |

<br>

## Used Features : gap_ip, gap_app, gap_os, gap_channel

#### Logistic Regression

* Score

| C | Train AUC | Valid AUC | Score |
|:-:|:---------:|:---------:|:-----:|
| 0.01 | 0.90207 | 0.90284 | - |
| 0.1 | 0.90207 | 0.90284 | - |
| 1 | 0.90207 | 0.90284 | - |
| 10 | 0.90207 | 0.90284 | - |
| 100 | 0.90207 | 0.90284 | - |

<br>

* Coefficient

| C | gap_ip | gap_app | gap_os | gap_channel |
|:-:|:------:|:-------:|:------:|:-----------:|
| 0.01 | -1.29240 e-05 | -3.60304 e-07 | -6.57009 e-08 | -1.93321 e-06 |
| 0.1 | -1.29240 e-05 | -3.60304 e-07 | -6.57009 e-08 | -1.93321 e-06 |
| 1 | -1.29240 e-05 | -3.60304 e-07 | -6.57009 e-08 | -1.93321 e-06 |
| 10 | -1.29240 e-05 | -3.60304 e-07 | -6.57009 e-08 | -1.93321 e-06 |
| 100 | -1.29240 e-05 | -3.60304 e-07 | -6.57009 e-08 | -1.93321 e-06 |

<br>

#### Decision Tree

* Score

| max_depth | Train AUC | Valid AUC | Score |
|:---------:|:---------:|:---------:|:-----:|
| 3 | 0.92493 | 0.92502 | - |
| 4 | 0.93229 | 0.93298 | - |
| 5 | 0.94772 | 0.94747 | - |
| 6 | 0.94939 | 0.94880 | 0.9320151 |
| 7 | 0.95567 | 0.95484 | 0.9401860 |

<br>

* Feature Importance

| max_depth | gap_ip | gap_app | gap_os | gap_channel |
|:---------:|:------:|:-------:|:------:|:-----------:|
| 3 | 0.77481 | 0.22519 | 0 | 0 |
| 4 | 0.77930 | 0.19882 | 0 | 0.02188 |
| 5 | 0.71237 | 0.23717 | 0.00002 | 0.05043 |
| 6 | 0.66198 | 0.25445 | 0.00389 | 0.07968 |
| 7 | 0.60866 | 0.26383 | 0.02640 | 0.10111 |

<br>

---

## Used Features : black_ip, black_app, black_device, black_os, black_channel

Check the performance of the black features.

<br>

#### Logistic Regression

* Score

| C | Train AUC | Valid AUC | Score |
|:-:|:---------:|:---------:|:-----:|
| 0.01 | 0.91762 | 0.91852 | 0.9050563 |
| 0.1 | 0.91762 | 0.91852 | - |
| 1 | 0.91762 | 0.91852 | - |
| 10 | 0.91762 | 0.91852 | - |
| 100 | 0.91762 | 0.91852 | - |

<br>

* Coefficient

| C | black_ip | black_app | black_device | black_os | black_channel |
|:-:|:--------:|:---------:|:------------:|:--------:|:-------------:|
| 0.01 | -3.07742 | -3.62670 | 0.25189 | 0.29946 | -1.87096 |
| 0.1 | -3.13798 | -3.71791 | 0.24973 | 0.38049 | -1.87220 |
| 1 | -3.14431 | -3.72740 | 0.24932 | 0.38902 | -1.87232 |
| 10 | -3.14495 | -3.72835 | 0.24927 | 0.38987 | -1.87233 |
| 100 | -3.14501 | -3.72845 | 0.24927 | 0.38996 | -1.87233 |

<br>

#### Decision Tree

* Score

| max_depth | Train AUC | Valid AUC | Score |
|:---------:|:---------:|:---------:|:-----:|
| 3 | 0.91725 | 0.91811 | - |
| 4 | 0.91823 | 0.91905 | - |
| 5 | 0.91828 | 0.91918 | 0.9056181 |

<br>

* Feature Importance

| max_depth | black_ip | black_app | black_device | black_os | black_channel |
|:---------:|:--------:|:---------:|:------------:|:--------:|:-------------:|
| 3 | 0.49437 | 0.36096 | 0 | 0.04157 | 0.10310 |
| 4 | 0.48133 | 0.35143 | 0.00036 | 0.06387 | 0.10301 |
| 5 | 0.48006 | 0.35051 | 0.00273 | 0.06396 | 0.10274 |

<br>

---

## Used Features : rate_app, rate_os, rate_channel, black_ip, black_app, black_channel, black_hour, click_gap

#### Logistic Regression

* Score

| C | Train AUC | Valid AUC | Score |
|:-:|:---------:|:---------:|:-----:|
| 0.01 |
| 0.1 |
| 1 |
| 10 |
| 100 |

<br>

* Coefficient

| C | black_ip | black_app | black_device | black_os | black_channel |
|:-:|:--------:|:---------:|:------------:|:--------:|:-------------:|
| 0.01 |
| 0.1 |
| 1 |
| 10 |
| 100 |

<br>

#### Decision Tree

* Score

| max_depth | Train AUC | Valid AUC | Score |
|:---------:|:---------:|:---------:|:-----:|
| 3 | 0.92559 | 0.92568 | - |
| 4 | 0.92985 | 0.92935 | - |
| 5 | 0.93457 | 0.93512 | - |
| 6 | 0.93623 | 0.93649 | 0.9165093 |
| 7 | 0.95774 | 0.95706 | 0.9455156 |

<br>

* Feature Importance

| max_depth | rate_app | rate_os | rate_channel | black_ip | black_app | black_channel | black_hour | click_gap |
|:---------:|:--------:|:-------:|:------------:|:--------:|:---------:|:-------------:|:----------:|:---------:|
| 3 | 0.53654 | 0 | 0.04264 | 0.34186 | 0 | 0 | 0 | 0.07896 |
| 4 | 0.41164 | 0.00612 | 0.04014 | 0.45683 | 0 | 0 | 0 | 0.08527 |
| 5 | 0.39942 | 0.03547 | 0.04737 | 0.43029 | 0 | 0 | 0 | 0.08745 |
| 6 | 0.38469 | 0.05511 | 0.06187 | 0.40823 | 0 | 0.00021 | 0 | 0.08989 |
| 7 | 0.37479 | 0.05373 | 0.06717 | 0.39277 | 0.00003 | 0.00020 | 0 | 0.11130 |

<br>

#### Random Forest

* Score

| max_depth | n_estimators | Train AUC | Valid AUC | Score |
|:---------:|:------------:|:---------:|:---------:|:-----:|
| 3 | 50 | 0.94391 | 0.94437 | - |
| | 70 | 0.95405 | 0.95487 | - |
| | 100 | 0.93676 | 0.93867 | - |
| 4 | 50 | 0.95665 | 0.95761 | - |
| | 70 | 0.95921 | 0.95910 | - |
| | 100 | 0.95836 | 0.95893 | - |
| 5 | 50 | 0.95855 | 0.95908 | - |
| | 70 | 0.95941 | 0.95874 | - |
| | 100 | 0.95841 | 0.95867 | - |
| 6 | 50 | 0.96255 | 0.96255 | 0.9568830 |
| | 70 | 0.96384 | 0.96349 | 0.9576988 |
| | 100 | 0.96174 | 0.96155 | 0.9554973 |
| 7 | 50 | 0.96525 | 0.96493 | 0.9582582 |
| | 70 | 0.96605 | 0.96573 | 0.9587136 |
| | 100 | 0.96480 | 0.96458 | 0.9579275 |

<br>

* Feature Importance

| max_depth | n_estimators | rate_app | rate_os | rate_channel | black_ip | black_app | black_channel | black_hour | click_gap |
|:---------:|:------------:|:--------:|:-------:|:------------:|:--------:|:---------:|:-------------:|:----------:|:---------:|
| 3 | 50 | 0.22730 | 0.05718 | 0.16014 | 0.18403 | 0.16842 | 0.03176 | 0.00007| 0.17110 |
| | 70 | 0.23058 | 0.04007 | 0.14966 | 0.23273 | 0.16539 | 0.04556 | 0.00001 | 0.13600 |
| | 100 | 0.23076 | 0.06219 | 0.19376 | 0.19820 | 0.15598 | 0.03604 | 0.00006 | 0.12301 |
| 4 | 50 | 0.23507 | 0.05810 | 0.16195 | 0.24215 | 0.16232 | 0.03239 | 0.00008 | 0.10794 |
| | 70 | 0.20142 | 0.06232 | 0.16431 | 0.26011 | 0.13414 | 0.05360 | 0.00006 | 0.12404 |
| | 100 | 0.22572 | 0.05755 | 0.17864 | 0.24804 | 0.12476 | 0.03560 | 0.00011 | 0.12958 |
| 5 | 50 | 0.22487 | 0.06193 | 0.17898 | 0.26155 | 0.12612 | 0.02492 | 0.00013 | 0.12150 |
| | 70 | 0.24904 | 0.05951 | 0.14770 | 0.21921 | 0.15012 | 0.04404 | 0.00012 | 0.13025 |
| | 100 | 0.20025 | 0.05768 | 0.18205 | 0.25979 | 0.14247 | 0.03607 | 0.00013 | 0.12156 |
| 6 | 50 | 0.23021 | 0.06538 | 0.18859 | 0.23687 | 0.11342 | 0.02644 | 0.00018 | 0.13891 |
| | 70 | 0.25310 | 0.05376 | 0.19524 | 0.24477 | 0.09595 | 0.02160 | 0.00023 | 0.13535 |
| | 100 | 0.21512 | 0.05992 | 0.17878 | 0.25204 | 0.12605 | 0.03140 | 0.00028 | 0.13641 |
| 7 | 50 | 0.22631 | 0.07242 | 0.17770 | 0.23735 | 0.13088 | 0.03346 | 0.00038 | 0.12151 |
| | 70 | 0.19365 | 0.06304 | 0.19033 | 0.26537 | 0.14282 | 0.03884 | 0.00038 | 0.10556 |
| | 100 | 0.22758 | 0.07211 | 0.16204 | 0.24757 | 0.12107 | 0.03688 | 0.00039 | 0.13237 |

<br>

#### Gradient Boosting

* Train Size : 20,000,000

* Score

| max_depth | n_estimators | learning_rate | Train AUC | Valid AUC | Score |
|:---------:|:------------:|:-------------:|:---------:|:---------:|:-----:|
| 5 | 50 | 0.001 | 0.93466 | 0.93521 | - |
| | | 0.01 | 0.95745 | 0.95718 | - |
| | | 0.1 | 0.86166 | 0.86397 | - |
| | 70 | 0.001 | 0.93593 | 0.93632 | - |
| | | 0.01 | 0.95755 | 0.95733 |
| | | 0.1 | 0.86160 | 0.86284 |  - |
| 6 | 50 | 0.001 | 0.95749 | 0.95711 |
| | | 0.01 | 0.95770 | 0.95739 |
| | | 0.1 | 0.81480 | 0.81412 | - |
| | 70 | 0.001 | 0.95749 | 0.95711 | 0.9478063 |
| | | 0.01 | 0.96185 | 0.96137 | 0.9536241 |
| | | 0.1 | 0.81582 | 0.81510 | - |
| 7 | 50 | 0.001 | 0.95767 | 0.95717 |
| | | 0.01 | 0.96494 | 0.96406 | 0.9547045 |
| | | 0.1 | 0.74079 | 0.73924 | - |
| | 70 | 0.001 | 0.95769 | 0.95719 | 0.9458499 |
| | | 0.01 | 0.96590 | 0.96519 | 0.9570854 |
| | | 0.1 | 0.74020 | 0.73819 | - |

<br>

* Feature Importance

| max_depth | n_estimators | learning_rate | rate_app | rate_os | rate_channel | black_ip | black_app | black_channel | black_hour | click_gap |
|:---------:|:------------:|:-------------:|:--------:|:-------:|:------------:|:--------:|:---------:|:-------------:|:----------:|:---------:|
| 5 | 50 | 0.001 | 0.39950 | 0.03542 | 0.04361 | 0.43016 | 0.00000 | 0 | 0 | 0.09131 |
| | | 0.01 | 0.42362 | 0.01879 | 0.06444 | 0.39475 | 0.00004 | 0.00014 | 0 | 0.09822 |
| | | 0.1 | 0.37123 | 0.03358 | 0.18692 | 0.19834 | 0.00166 | 0.00011 | 0 | 0.20815 |
| | 70 | 0.001 | 0.39950 | 0.03493 | 0.04364 | 0.43012 | 0.00000 | 0 | 0 | 0.09180 |
| | | 0.01 | 0.42045 | 0.02288 | 0.06726 | 0.39527 | 0.00003 | 0.00015 | 0 | 0.09395 |
| | | 0.1 | 0.33026 | 0.03096 | 0.19310 | 0.19021 | 0.00119 | 0.00014 | 0 | 0.25415 |
| 6 | 50 | 0.001 | 0.38556 | 0.03668 | 0.06826 | 0.41150 | 0.00003 | 0.00021 | 0 | 0.09775 |
| | | 0.01 | 0.39791 | 0.03791 | 0.05775 | 0.40448 | 0.00003 | 0.00045 | 0.00000 | 0.10147 |
| | | 0.1 | 0.33409 | 0.11370 | 0.18170 | 0.09742 | 0.00086 | 0.00022 | 0.00012 | 0.27188 |
| | 70 | 0.001 | 0.38546 | 0.03653 | 0.06852 | 0.41155 | 0.00003 | 0.00021 | 0 | 0.09768 |
| | | 0.01 | 0.39564 | 0.03947 | 0.06002 | 0.40125 | 0.00005 | 0.00047 | 0.00003 | 0.10308 |
| | | 0.1 | 0.34279 | 0.11705 | 0.18112 | 0.09362 | 0.00065 | 0.00016 | 0.00013 | 0.26446 |
| 7 | 50 | 0.001 | 0.37538 | 0.04874 | 0.07873 | 0.39549 | 0.00011 | 0.00052 | 0 | 0.10103 |
| | | 0.01 | 0.38784 | 0.03810 | 0.07969 | 0.38963 | 0.00015 | 0.00111 | 0.00020 | 0.10328 |
| | | 0.1 | 0.21252 | 0.11037 | 0.19011 | 0.12083 | 0.00044 | 0.00318 | 0.00002 | 0.36252 |
| | 70 | 0.001 | 0.37514 | 0.04863 | 0.07917 | 0.39544 | 0.00011 | 0.00054 | 0 | 0.10095 |
| | | 0.01 | 0.38485 | 0.03824 | 0.08401 | 0.38630 | 0.00013 | 0.00096 | 0.00024 | 0.10526 |
| | | 0.1 | 0.21269 | 0.11161 | 0.19345 | 0.10581 | 0.00038 | 0.00401 | 0.00002 | 0.37201 |

<br>

#### LightGBM

* Parameter

<br>

* Score

| Train Size | Train AUC | Valid AUC | Score |
|:----------:|:---------:|:---------:|:-----:|
| 10m |
| 20m |
| 30m |
| 40m |
| 50m |
| All |

<br>

* Feature Importance

| Train Size | rate_app | rate_os | rate_channel |
|:----------:|:--------:|:-------:|:------------:|
| 10m |
| 20m |
| 30m |
| 40m |
| 50m |
| All |

<br>

[Page Up](#4-modeling)

<br>

---


---

[Contents](README.md) <br>
[3. Sampling](03_Sampling.md) <br>
[5. Conclusion](05_Conclusion.md)
